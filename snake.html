<!DOCTYPE html>
<html>
<head>
    <title>snake test</title>
    <h1 id='boardDisplay'>hi</h1>
</head>
<body>

    <script>
var board = [[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],
             [-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1],
             [-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1],
             [-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1],
             [-1,0,2,0,0,0,0,0,1,0,0,0,0,0,0,-1],
             [-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1],
             [-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1],
             [-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1],
             [-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]
            ]
var direction ="left"
var headPos = [0,0]
var length = 4;
var dir = 0;    
function gg() {
    for (let y = 1; y < 7; y++) {
        for (let x = 1; x < 14; x++) {
            
            board[y][x] = -10
            
        }
    }
}
function win() {
    
}

function newFood() {
    let randX = Math.floor(Math.random()*14);
    let randY = Math.floor(Math.random()*7);
    if (board[randY][randX] == 0) {
    board[randY][randX] = 1;
    length = length+1
        } else newFood();
}

function updateDisplay() {
    var displayString = "";
    for (var i = 0; i < board.length; i++) {
    displayString += board[i].join(' ') + "<br>";
        }
    document.getElementById('boardDisplay').innerHTML = displayString;
}
function headPosition() {
    for (let y = 1; y < 7; y++) {
        for (let x = 1; x < 14; x++) {
            if (board[y][x] == 2) {
                headPos = [y,x];
            }
        }
    }
}

        
function move() {
    //find the head.
    headPosition();
    for (let y = 1; y < 8; y++) {
        for (let x = 1; x < 15; x++) {
            if (board[y][x] >= 2 ){
                board[y][x] = board[y][x]+1;
                if (board[y][x] == length+1) {
                    board[y][x] = 0;
                }
            }
        }    
    }
    if (direction == "left") {
        if (board[headPos[0]][headPos[1]+1] == 0||board[headPos[0]][headPos[1]+1] == 1) {
            if (board[headPos[0]][headPos[1]+1] ==1) {newFood();}
            board[headPos[0]][headPos[1]+1] = 2;
        } else {gg();}
    }
    if (direction == "right") {
        if (board[headPos[0]][headPos[1]-1] == 0||board[headPos[0]][headPos[1]-1] == 1) {
            if (board[headPos[0]][headPos[1]-1] ==1) {newFood();}
            board[headPos[0]][headPos[1]-1] = 2;
        } else {gg();}
    }
    if (direction == "up") {
        if (board[headPos[0]-1][headPos[1]] == 0 || board[headPos[0]-1][headPos[1]] == 1) {
            if (board[headPos[0]-1][headPos[1]] ==1) {newFood();}
            board[headPos[0]-1][headPos[1]] = 2;
        } else {gg();}
    }
    if (direction == "down") {
        if (board[headPos[0]+1][headPos[1]] == 0 || board[headPos[0]+1][headPos[1]] == 1) {
            if (board[headPos[0]+1][headPos[1]] ==1) {newFood();}
            board[headPos[0]+1][headPos[1]] = 2;
            } else {gg();}
    }
    headPosition();
}
document.addEventListener('keydown', (event) => {
    if (event.key === 'w' && board[headPos[0]+1][headPos[1]]!=3) {
        direction = "up"
    }
    if (event.key === 's' && board[headPos[0]-1][headPos[1]]!=3) {
        direction = "down"
    }
    if (event.key === 'a' && board[headPos[0]][headPos[1]-1]!=3) {
        direction = "right"
    }
    if (event.key === 'd' && board[headPos[0]][headPos[1]+1]!=3) {
        direction = "left"
    }
});

function gameLoop() {

    move();
    
    updateDisplay();
    if (gg == 91) {win();}
    
    setTimeout(gameLoop, 200);
}
gameLoop();
        
    </script>

</body>
</html>
